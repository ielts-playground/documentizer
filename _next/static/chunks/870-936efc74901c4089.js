(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[870],{648:function(e,t,n){"use strict";n.d(t,{YR:function(){return u},DT:function(){return d},r4:function(){return g},TW:function(){return h},qE:function(){return p},Ch:function(){return f},Ow:function(){return v},Wc:function(){return x},dB:function(){return m}});var s=n(6154),a=n(5885),l=n(3454);let r=new a.Z,i=s.Z.create({baseURL:"https://ielts-playground-api.tuanm.id.vn/api",headers:{"X-Api-Key":l.env.SERVER_API_KEY}}),o=s.Z.create({baseURL:"https://ielts-playground-api.tuanm.id.vn/api"});o.interceptors.request.use(e=>{let t=r.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});var c={private:i,default:o};async function u(e,t){let{token:n}=(await c.default.post("/authenticate",{username:e,password:t})).data||{};return n&&r.set("token",n),!!n}async function d(e,t){let n=new FormData;return n.append("content",new Blob([JSON.stringify(e)],{type:"application/json"})),t&&n.append("audio",t),(await c.default.put("/test",n,{headers:{Authorization:c.default.defaults.headers.Authorization,"Content-Type":"multipart/form-data"}})).data}async function p(){await c.default.get("/users")}async function g(e){let t={email:e.email,phoneNumber:e.phoneNumber,firstName:e.firstName,lastName:e.lastName,password:e.password,username:e.username};try{return await c.default.post("/register",t),!0}catch(e){return console.error("API request failed:",e),!1}}async function m(e){return(await c.default.get("/exam/".concat(e,"/test/writing"))).data}async function h(e,t){await c.default.post("/exam/".concat(e,"/evaluate/writing"),{point:t})}async function f(e){return(await c.default.get("/exam/".concat(e,"/result"))).data}async function x(e){return(await c.default.get("/exam/".concat(e,"/answer/writing"))).data}async function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await c.default.get("/exam/not-graded?page=".concat(e,"&size=").concat(t))).data}},2213:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var s=n(5893),a=n(648),l=n(1163),r=n(7294),i=n(8747),o=n.n(i);function c(e){let t=(0,l.useRouter)(),[n,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let n=encodeURIComponent(window.location.pathname);(0,a.qE)().then(()=>{e.successUrl&&t.push(e.successUrl),i(!1),e.onSuccess&&e.onSuccess()}).catch(()=>{var s;t.push("".concat(null!==(s=e.fallbackUrl)&&void 0!==s?s:"/log-in","?redirect=").concat(n))})}),(0,s.jsx)(s.Fragment,{children:n&&(0,s.jsx)("div",{className:o().container})})}},8913:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(5893),a=n(7294),l=n(5214),r=n.n(l);function i(e){let[t,n]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{n(e.value)},[e.value]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{className:t?r().notEmpty:r().empty,id:e.kei,onChange:t=>{n(t.target.value),e.onChange&&e.onChange(t.target.value)},defaultValue:t,placeholder:e.kei}),e.inQuestion&&(0,s.jsx)("br",{})]})}},8735:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(5893);n(7294);var a=n(3870);function l(e){var t;let n={display:"block",border:"solid",marginLeft:"auto",marginRight:"auto",width:null!==(t=e.width)&&void 0!==t?t:"max-content",backgroundColor:"white"};return(0,s.jsxs)("div",{style:n,children:[e.value&&(0,s.jsx)(a.Dx,{value:e.value}),(0,s.jsx)(a.Ei,{value:e.options},e.kei)]})}},7416:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var s=n(5893),a=n(7294),l=n(4948),r=n(3870),i=n(1669),o=n.n(i);function c(e){var t,n,i,c;let[u,d]=(0,a.useState)([]),[p,g]=(0,a.useState)(["100%","auto","0%"]);return(0,a.useEffect)(()=>{let t=t=>e.components.filter(t).map((t,n)=>(0,s.jsx)("span",{children:function(e,t,n){let{component:a,elements:l}=function(e,t){let n=[],a={...e,onChange:t};switch(e.type){case"title":n.push((0,s.jsx)(r.Dx,{...a}));break;case"text":n.push((0,s.jsx)(r.xv,{...a}));break;case"box":n.push((0,s.jsx)(r.xu,{...a}));break;case"image":n.push((0,s.jsx)(r.Ee,{...a}));break;case"options":n.push((0,s.jsx)(r.Ei,{...a}));break;case"footnote":n.push((0,s.jsx)(r.wF,{...a}));case"question":n.push((0,s.jsx)(r.HN,{...a}));break;case"range":let{from:l,to:i,and:o}=a.value||{},c="<hr>\n\n## Questions ".concat(l,"-").concat(i);if(o){let e=o;for(;e;)c=c.concat(" and ".concat(e.from,"-").concat(e.to)),e=e.and}n.push((0,s.jsx)(r.xv,{...a,value:c}));break;case"list":n.push((0,s.jsx)(r.aV,{...a}));break;case"break":n.push((0,s.jsx)("div",{}));break;default:n.push((0,s.jsx)(s.Fragment,{children:a.value}))}return{component:a,elements:n}}(e,n);return(0,s.jsx)("span",{onClick:()=>t(a),children:l.map((e,t)=>(0,s.jsx)("span",{children:e},t))})}(t,t=>{e.onClick(t)},n=>{e.onAnswer(t.kei,n)})},n));d([t(e=>!e.position),t(e=>!!e.position)])},[JSON.stringify(e.components)]),(0,a.useEffect)(()=>{var t,n;let s=!!(null===(t=u[0])||void 0===t?void 0:t.length),a=!!(null===(n=u[1])||void 0===n?void 0:n.length);s&&a?g(e.rightPane?["45%","45%","10%"]:["50%","50%","auto"]):s&&!a?g(e.rightPane?["90%","auto","10%"]:["100%","auto","0%"]):a&&!s?g(e.rightPane?["auto","90%","10%"]:["auto","100%","0%"]):g(e.rightPane?["90%%","auto","10%"]:["100%","auto","0%"])},[null===(t=u[0])||void 0===t?void 0:t.length,null===(n=u[1])||void 0===n?void 0:n.length,e.rightPane]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l.ZP,{className:o().container,split:"vertical",sizes:p,sashRender:void 0,onChange:void 0,children:[!!(null===(i=u[0])||void 0===i?void 0:i.length)&&(0,s.jsx)(l.X6,{className:o().pane,children:(0,s.jsx)("div",{className:o().container,children:u[0]})},0),!!(null===(c=u[1])||void 0===c?void 0:c.length)&&(0,s.jsx)(l.X6,{className:o().pane,children:(0,s.jsx)("div",{className:o().container,children:u[1]})},1),(0,s.jsx)(l.X6,{className:o().pane,children:(0,s.jsx)("div",{className:o().container,children:e.rightPane})},2)]})})}},3870:function(e,t,n){"use strict";n.d(t,{gx:function(){return s.Z},xu:function(){return a.Z},wF:function(){return i},Ee:function(){return o},aV:function(){return c.Z},Ei:function(){return p},Lz:function(){return g.Z},HN:function(){return h},OP:function(){return N},xv:function(){return L},Dx:function(){return $},Vm:function(){return F},zv:function(){return q}});var s=n(2213),a=n(8913),l=n(5893),r=n(7294);function i(e){return(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:e.kei}),(0,l.jsx)("span",{style:{marginLeft:"10px"}}),(0,l.jsx)("span",{children:e.value})]})}function o(e){var t,n;return(0,l.jsx)("img",{style:{display:"block",marginLeft:"auto",marginRight:"auto",marginBlock:"20px",padding:"20px",cursor:"pointer",border:"solid 1px black"},src:e.value,alt:e.value?e.kei:"Upload an image now!",width:((null===(t=e.size)||void 0===t?void 0:t.width)||300)+"px",height:((null===(n=e.size)||void 0===n?void 0:n.height)||250)+"px",onClick:()=>{e.onChange&&e.onChange(e.value)}})}var c=n(8735),u=n(1943),d=n.n(u);function p(e){let[t,n]=(0,r.useState)({});return(0,r.useEffect)(()=>{try{let t=JSON.parse(e.selected)||[],s={};t.forEach(e=>{s[e]=!0}),n(s)}catch(e){}},[e.selected]),(0,l.jsx)("span",{className:e.inQuestion?d().selectable:d().normal,children:Object.keys(e.value||{}).map((s,a)=>(0,l.jsxs)("div",{className:t[s]?d().selected:d().unselected,onClick:()=>{var a;let l=null!==(a=e.maxSelections)&&void 0!==a?a:1,r=1===l?{}:t;if(t[s])delete r[s];else{let e=1===l||Object.values(r).filter(e=>e).length<l;e&&(r[s]=!0)}if(n(r),e.onClick){let t=Object.entries(r).filter(e=>{let[t,n]=e;return!!n}).map(e=>{let[t]=e;return t}),n=1===l?t[0]:JSON.stringify(t);e.onClick(t.length?n:void 0)}},children:[(0,l.jsx)("strong",{children:s}),(0,l.jsx)("span",{style:{marginLeft:"10px"}}),(0,l.jsx)("span",{children:e.value[s]})]},a))})}var g=n(7416),m=n(9149);function h(e){let[t,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{n(e.options&&!!Object.keys(e.options).length),i(e.answer)},[e]),(0,l.jsxs)("div",{id:t?e.kei:void 0,style:{display:t?"block":"inline",marginBlock:"20px"},children:[(0,l.jsx)("div",{style:{display:"block"}}),(0,l.jsx)("h2",{style:{display:"inline",marginRight:"20px"},children:e.kei}),(0,l.jsx)("span",{style:{marginLeft:"10px"}}),(0,l.jsx)("span",{style:{display:"inline-block"},children:(0,l.jsx)(m.ZP,{markdown:e.value,style:{height:0}})}),t&&(0,l.jsx)(p,{kei:e.kei,value:e.options,onClick:e.onChange,inQuestion:!0,selected:s,maxSelections:e.size}),!t&&(0,l.jsx)(a.Z,{kei:e.kei,value:s,onChange:e.onChange})]})}var f=n(5152),x=n.n(f);n(8514);var v=n(3787);let b=new v.Converter;function j(e){return e.replaceAll(/\s+style=\".+?\"/g,"").replaceAll(/<span>\s*<\/span>/g,"").replaceAll(/<p>\s*<\/p>/g,"").replaceAll(/<img\s*.+?>/g,"<strong>[[image]]</strong>").replaceAll(/<strong>(\s|&nbsp;)+<\/strong>/g," ").replaceAll(/<em>(\s|&nbsp;)+<\/em>/g," ").replaceAll(/<strong>(\s|&nbsp;)+(.+?)<\/strong>/g," <strong>$2</strong>").replaceAll(/<strong>(.+?)(\s|&nbsp;)+<\/strong>/g,"<strong>$1</strong> ").replaceAll(/<em>(\s|&nbsp;)+(.+?)<\/em>/g," <em>$2</em>").replaceAll(/<em>(.+?)(\s|&nbsp;)+<\/em>/g,"<em>$1</em> ").replaceAll(/<strong>(\s|&nbsp;)+<em>(.+?)<\/em><\/strong>/g," <strong><em>$2</em></strong>").replaceAll(/<strong><em>(.+?)<\/em>(\s|&nbsp;)+<\/strong>/g,"<strong><em>$1</em></strong> ").replaceAll(/<em>(\s|&nbsp;)+<strong><em>(.+?)<\/em><\/strong><\/em>/g," <em><strong><em>$2</em></strong></em>").replaceAll(/<em><strong><em>(.+?)<\/em><\/strong>(\s|&nbsp;)+<\/em>/g,"<em><strong><em>$1</em></strong></em> ").replaceAll(/(&nbsp;)+/g," ").replaceAll(/[^\S\n]/g," ").replaceAll(/<p class=\"ql-align-center\">\s*(<strong><em>.+?<\/em><\/strong>)?\s*<\/p>/g,"<p>$1 [[title]]</p>").replaceAll(/<p class=\"ql-align-center\">\s*(<strong>.+?<\/strong>)?\s*<\/p>/g,"<p>$1 [[title]]</p>").replaceAll(/<p>\s*\[\[title\]\]/g,"<br>").replaceAll(/<p><strong><em>(questions\s+\d+\D+\d+)<\/em><\/strong>\s\[\[title\]\]<\/p>/gi,"<p><strong><em>$1</em></strong></p>").replaceAll(/<p><strong>(questions\s+\d+\D+\d+)<\/strong>\s\[\[title\]\]<\/p>/gi,"<p><strong>$1</strong></p>").concat("<br>").replaceAll(/(<br>)+/g,"<br>")}function _(e){return e.replaceAll(/\\\./g,".").replaceAll(/·/g,".").replaceAll(/…+/g,"...").replaceAll(/\*{2}(\d+)\*{0,2}\s*\.\.+\*{0,2}/g,"**[[$1]]**").replaceAll(/(\*+[A-Z]+?\*+)\s+/g,"$1 ").replaceAll(/(\*+\d+?\*+)\s+/g,"$1 ").replaceAll(/\.\.+/g,".").replaceAll(/<span>(.+?)<\/span>/g,"$1").replaceAll(/(<br>)/g,"\n").replaceAll(/(\\n\\n)+/g,"\n\n")}function y(e){return j(b.makeHtml(_(e)))}function k(e){return _(b.makeMarkdown(j(e)))}b.setOption("simpleLineBreaks",!1);var w=n(571),A=n.n(w);let C=x()(()=>Promise.all([n.e(937),n.e(167)]).then(n.t.bind(n,1167,23)),{loadableGenerated:{webpack:()=>[1167]},ssr:!1});function N(e){let[t,n]=(0,r.useState)(void 0);(0,r.useEffect)(()=>{e.markdown&&n(y(e.markdown))},[e.markdown]);let s=()=>{if(e.onFinish){let n=k(t),s=y(n);e.onFinish(k(s))}},a=()=>{e.onCancel&&e.onCancel()};return(0,l.jsxs)("div",{className:A().container,children:[(0,l.jsx)("div",{className:A().editor,children:(0,l.jsx)(C,{theme:"snow",modules:{toolbar:!1},value:t,onChange:n})}),(0,l.jsxs)("div",{className:A().action,children:[(0,l.jsx)("button",{onClick:()=>a(),children:"cancel"}),(0,l.jsx)("button",{className:A().submit,onClick:()=>s(),children:"save"})]})]})}var E=n(2404),S=n(3717),Z=n.n(S);function L(e){let[t,n]=(0,r.useState)();return(0,r.useEffect)(()=>{let t=(0,E.uS)((0,l.jsx)(m.ZP,{markdown:e.value}));if("range"===e.type)n(t);else{let e=[];for(let n of t.matchAll(/<p>(.+?)<\/p>(\n|<br>|<br\/>)*/g))e.push("".concat(n[1]||"").concat(n[2]?"<br>":""));let s=[];for(let t of e)if(t){let e=t.replaceAll(/^<strong>(.+?)<\/strong>(<br>)*$/g,"<br><strong>$1</strong><br>");s.push("<span>".concat(e,"</span>"))}n(s.join("<br>"))}},[e.value]),(0,l.jsx)("span",{className:Z().container,dangerouslySetInnerHTML:{__html:t}})}function R(e,t){let n={margin:"10px",textAlign:"center"};switch(e){case"h1":return(0,l.jsx)("h1",{style:n,children:t});case"h2":return(0,l.jsx)("h2",{style:n,children:t});case"h3":default:return(0,l.jsx)("h3",{style:n,children:t});case"h4":return(0,l.jsx)("h4",{style:n,children:t})}}function $(e){let{size:t,value:n}=e,s=(/\*(.+)\*/g.exec(n)||{})[1];return s?(0,l.jsx)("em",{children:R(t,s)}):R(t,n)}var P=n(9353),D=n.n(P);function F(e){let[t,n]=(0,r.useState)(void 0);(0,r.useEffect)(()=>{n(e.audio)},[e.audio]);let s=()=>{e.onCancel()},a=()=>{e.onFinish(t)},i=e=>{n(e.target.files[0])};return(0,l.jsxs)("div",{className:D().all,children:[(0,l.jsx)("div",{className:D().guide,children:"Choose your audio file:"}),(0,l.jsx)("input",{className:D().input,type:"file",accept:"audio/*",onChange:e=>i(e)}),(0,l.jsx)("div",{className:D().guide,children:" Test Audio: "}),(0,l.jsx)("audio",{controls:!0,src:(()=>{if(t)return URL.createObjectURL(t)})()}),(0,l.jsxs)("div",{className:D().box,children:[(0,l.jsx)("button",{onClick:()=>s(),children:"Cancel"}),(0,l.jsx)("button",{className:D().submit,onClick:()=>a(),children:"Save"})]})]})}var U=n(3595),O=n.n(U);function q(e){let[t,n]=(0,r.useState)();(0,r.useEffect)(()=>{n(e.initialValue)},[e.initialValue]);let s=e=>{n(e.toString())},a=()=>{e.onCancel()},i=t=>{e.onFinish(t,500,300)},o=(e,t)=>new Promise((n,s)=>{let a=document.createElement("img");a.src=e,a.onload=()=>{let e=document.createElement("canvas");e.width=a.width,e.height=a.height;let s=e.getContext("2d");s.drawImage(a,0,0);let l=s.getImageData(0,0,e.width,e.height),r=l.data;for(let e=0;e<r.length;e+=4){let t=(r[e]+r[e+1]+r[e+2])/3;r[e]=t,r[e+1]=t,r[e+2]=t}s.putImageData(l,0,0),n(e.toDataURL("image/jpeg",t))}});return(0,l.jsxs)("div",{className:O().all,children:[(0,l.jsx)("div",{className:O().guide,children:"Choose your image:"}),(0,l.jsx)("input",{className:O().input,type:"file",onChange:e=>(function(e){let t=e.currentTarget.files.item(0),n=new FileReader;n.readAsDataURL(t),n.onload=async e=>{let t=e.target.result.toString(),n=await o(t,.99);s(n)}})(e)}),(0,l.jsx)("div",{className:O().guide,children:" Preview: "}),(0,l.jsx)("img",{src:t,width:500}),(0,l.jsxs)("div",{className:O().box,children:[(0,l.jsx)("button",{onClick:()=>a(),children:"Cancel"}),(0,l.jsx)("button",{className:O().submit,onClick:()=>i(t),children:"Save"})]})]})}},8747:function(e){e.exports={container:"styles_container__dVA4Z"}},5214:function(e){e.exports={empty:"styles_empty__1tqDZ",notEmpty:"styles_notEmpty__S9bEw"}},1943:function(e){e.exports={normal:"styles_normal__IkJl8",selectable:"styles_selectable__V75FK",selected:"styles_selected__vLNKi",unselected:"styles_unselected__Co5_y"}},1669:function(e){e.exports={container:"styles_container__LbLcP",pane:"styles_pane__ZgZ_b"}},571:function(e){e.exports={container:"styles_container__XigD9",action:"styles_action__DYik7",submit:"styles_submit__Fgpum",editor:"styles_editor__fu2Hr"}},3717:function(e){e.exports={container:"styles_container__94R98"}},9353:function(e){e.exports={all:"styles_all__eG7JL",box:"styles_box___tCi4",submit:"styles_submit__ySmNr",input:"styles_input__mWGKh",guide:"styles_guide__nBWbJ"}},3595:function(e){e.exports={all:"styles_all__EuRX3",box:"styles_box__38bfY",submit:"styles_submit__UAgIQ",input:"styles_input__M0UC5",guide:"styles_guide__VcCl2"}}}]);