(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{5499:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/review",function(){return n(9968)}])},648:function(e,t,n){"use strict";n.d(t,{YR:function(){return l},qz:function(){return h},DT:function(){return d},r4:function(){return p},TW:function(){return w},qE:function(){return f},Ch:function(){return _},Ow:function(){return v},Wc:function(){return x},dB:function(){return m}});var a=n(6154),r=n(5885),s=n(3454);let i=new r.Z,c=a.Z.create({baseURL:"https://ielts-playground-api.tuanm.id.vn/api",headers:{"X-Api-Key":s.env.SERVER_API_KEY}}),o=a.Z.create({baseURL:"https://ielts-playground-api.tuanm.id.vn/api"});o.interceptors.request.use(e=>{let t=i.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});var u={private:c,default:{...o,clearToken:()=>{i.remove("token")}}};async function l(e,t){let{token:n}=(await u.default.post("/authenticate",{username:e,password:t})).data||{};return n&&i.set("token",n),!!n}async function d(e,t,n){let a=new FormData;for(let r of(a.append("audio",t),a.append("subscription",e),n))a.append(r.skill,new Blob([JSON.stringify(r)],{type:"application/json"}));return(await u.default.put("/test/new",a,{headers:{Authorization:u.default.defaults.headers.Authorization,"Content-Type":"multipart/form-data"}})).data}async function f(){return(await u.default.get("/users")).data}function h(){u.default.clearToken()}async function p(e){let t={email:e.email,phoneNumber:e.phoneNumber,firstName:e.firstName,lastName:e.lastName,password:e.password,username:e.username};try{return await u.default.post("/register",t),!0}catch(e){return console.error("API request failed:",e),!1}}async function m(e){return(await u.default.get("/exam/".concat(e,"/test/writing"))).data}async function w(e,t){await u.default.post("/exam/".concat(e,"/evaluate/writing"),{point:t})}async function _(e){return(await u.default.get("/exam/".concat(e,"/result"))).data}async function x(e){return(await u.default.get("/exam/".concat(e,"/answer/writing"))).data}async function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await u.default.get("/exam/not-graded?page=".concat(e,"&size=").concat(t))).data}},2213:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(5893),r=n(648),s=n(1163),i=n(7294),c=n(8747),o=n.n(c);function u(e){let t=(0,s.useRouter)(),[n,c]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let n=encodeURIComponent(window.location.pathname);(0,r.qE)().then(n=>{e.successUrl&&t.push(e.successUrl),c(!1),e.onSuccess&&e.onSuccess(n)}).catch(()=>{var a;t.push("".concat(null!==(a=e.fallbackUrl)&&void 0!==a?a:"/log-in","?redirect=").concat(n))})}),(0,a.jsx)(a.Fragment,{children:n&&(0,a.jsx)("div",{className:o().container})})}},9968:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(5893),r=n(648),s=n(1163),i=n(7294),c=n(6918),o=n.n(c),u=n(2213);function l(){let e=(0,s.useRouter)(),[t,n]=(0,i.useState)(void 0),[c,l]=(0,i.useState)(1),[d,f]=(0,i.useState)(20),[h,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{h&&(0,r.Ow)(c-1,d).then(e=>{n(e)}).catch(()=>{})},[c,h]);let m=()=>{l(e=>Math.max(e-1,1))},w=()=>{let e=Math.ceil((null==t?void 0:t.total)/d),a=Math.min(c+1,e);(0,r.Ow)(a-1,d).then(e=>{n(e),l(a)}).catch(()=>{})},_=t=>{e.push("/review/writing/".concat(t))};return(0,a.jsxs)("div",{className:o().container,children:[(0,a.jsx)(u.Z,{onSuccess:()=>p(!0)}),(0,a.jsxs)("span",{className:o().header,children:[(0,a.jsx)("h2",{children:"LIST OF EXAMS"}),(0,a.jsx)("h2",{className:o().home,onClick:()=>{e.push("/home")},children:"HOME"})]}),(0,a.jsx)("span",{className:o().list,children:(0,a.jsx)("span",{children:(()=>{let e=(null==t?void 0:t.examIds)||[];return e.map(e=>(0,a.jsxs)("h3",{className:o().option,onClick:()=>_(e.examId),children:["#",e.examId," of ",e.userName]},e.examId))})()})}),(0,a.jsx)("span",{className:o().footer,children:(()=>{let e=Math.ceil((null==t?void 0:t.total)/d);return(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{disabled:1===c,onClick:m,children:"Previous"}),(0,a.jsxs)("span",{children:["Page ",c," of ",e]}),(0,a.jsx)("button",{disabled:c===e,onClick:w,children:"Next"})]})})()})]})}},8747:function(e){e.exports={container:"styles_container__dVA4Z"}},6918:function(e){e.exports={container:"styles_container__JCO64",header:"styles_header__4fUwb",home:"styles_home__GpKeE",option:"styles_option__76BR8",footer:"styles_footer__w63cs"}}},function(e){e.O(0,[7,774,888,179],function(){return e(e.s=5499)}),_N_E=e.O()}]);