(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[935],{6677:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exam/[id]",function(){return n(5149)}])},648:function(e,t,n){"use strict";n.d(t,{YR:function(){return c},DT:function(){return d},r4:function(){return f},TW:function(){return x},qE:function(){return h},Ch:function(){return p},Ow:function(){return j},Wc:function(){return g},dB:function(){return m}});var a=n(6154),i=n(5885),r=n(3454);let s=new i.Z,l=a.Z.create({baseURL:"https://ielts-playground-api.tuanm.id.vn/api",headers:{"X-Api-Key":r.env.SERVER_API_KEY}}),o=a.Z.create({baseURL:"https://ielts-playground-api.tuanm.id.vn/api"});o.interceptors.request.use(e=>{let t=s.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});var u={private:l,default:o,new:a.Z.create()};async function c(e,t){let{token:n}=(await u.default.post("/authenticate",{username:e,password:t})).data||{};return n&&s.set("token",n),!!n}async function d(e,t){if(t){let n=Date.now()+"_"+t.name,a=t.type;console.log("Creating URL to upload audio file...");let i=(await u.default.post("/test/audio/create-upload-link",{fileName:n,contentType:a})).data;console.log("Upload URL created: ".concat(i,".")),console.log("Uploading audio file...");let r=await u.new.put(i,t,{headers:{"Content-Type":a}});if(r.status>=400)throw Error("Audio file upload failed: ".concat(r.statusText));console.log("Audio file uploaded:",{fileName:n,contentType:a}),console.log("Publishing audio file...");let s=(await u.default.post("/test/audio/make-public",{fileName:n})).data;console.log("Audio file published: ".concat(s)),e={...e,audioUrl:s}}let n=new FormData;return n.append("content",new Blob([JSON.stringify(e)],{type:"application/json"})),(await u.default.put("/test",n,{headers:{Authorization:u.default.defaults.headers.Authorization,"Content-Type":"multipart/form-data"}})).data}async function h(){await u.default.get("/users")}async function f(e){let t={email:e.email,phoneNumber:e.phoneNumber,firstName:e.firstName,lastName:e.lastName,password:e.password,username:e.username};try{return await u.default.post("/register",t),!0}catch(e){return console.error("API request failed:",e),!1}}async function m(e){return(await u.default.get("/exam/".concat(e,"/test/writing"))).data}async function x(e,t){await u.default.post("/exam/".concat(e,"/evaluate/writing"),{point:t})}async function p(e){return(await u.default.get("/exam/".concat(e,"/result"))).data}async function g(e){return(await u.default.get("/exam/".concat(e,"/answer/writing"))).data}async function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await u.default.get("/exam/not-graded?page=".concat(e,"&size=").concat(t))).data}},5149:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(5893),i=n(648),r=n(1163),s=n(7294);function l(){var e,t,n,l;let o=(0,r.useRouter)(),[u,c]=(0,s.useState)(),[d,h]=(0,s.useState)();(0,s.useEffect)(()=>{let{id:e}=o.query||{},t=Number(e);t&&(c(t),(0,i.Ch)(t).then(h).catch(e=>{alert(e.message),o.back()}))},[o]);let f=()=>{alert("Not implemented yet!")},m={border:"solid 1px black"};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h1",{children:["Exam #",u]}),d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"Examinee"}),(0,a.jsxs)("table",{style:m,children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Username"}),(0,a.jsx)("td",{children:d.examinee.username})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Full Name"}),(0,a.jsx)("td",{children:"".concat(null===(e=d.examinee)||void 0===e?void 0:e.firstName," ").concat(null===(t=d.examinee)||void 0===t?void 0:t.lastName)})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Email"}),(0,a.jsx)("td",{children:null===(n=d.examinee)||void 0===n?void 0:n.email})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Phone Number"}),(0,a.jsx)("td",{children:null===(l=d.examinee)||void 0===l?void 0:l.phoneNumber})]})]}),(0,a.jsx)("h2",{children:"Result"}),(0,a.jsxs)("table",{style:m,children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Reading"}),(0,a.jsx)("td",{children:d.reading})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Listening"}),(0,a.jsx)("td",{children:d.listening})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Writing"}),(0,a.jsx)("td",{children:d.writing})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Examiner"}),(0,a.jsx)("td",{children:d.examiner})]})]}),(0,a.jsx)("hr",{}),(0,a.jsx)("button",{onClick:f,children:"Save"})]})]})}}},function(e){e.O(0,[774,7,888,179],function(){return e(e.s=6677)}),_N_E=e.O()}]);