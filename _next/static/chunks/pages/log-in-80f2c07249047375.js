(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{7267:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/log-in",function(){return n(8227)}])},648:function(e,t,n){"use strict";n.d(t,{YR:function(){return d},DT:function(){return c},r4:function(){return p},TW:function(){return h},qE:function(){return f},Ch:function(){return g},Ow:function(){return y},Wc:function(){return w},dB:function(){return m}});var a=n(6154),o=n(5885),r=n(3454);let i=new o.Z,u=a.Z.create({baseURL:"https://ielts-playground-api.tuanm.id.vn/api",headers:{"X-Api-Key":r.env.SERVER_API_KEY}}),s=a.Z.create({baseURL:"https://ielts-playground-api.tuanm.id.vn/api"});s.interceptors.request.use(e=>{let t=i.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});var l={private:u,default:s,new:a.Z.create()};async function d(e,t){let{token:n}=(await l.default.post("/authenticate",{username:e,password:t})).data||{};return n&&i.set("token",n),!!n}async function c(e,t){if(t){let n=Date.now()+"_"+t.name,a=t.type;console.log("Creating URL to upload audio file...");let o=(await l.default.post("/test/audio/create-upload-link",{fileName:n,contentType:a})).data;console.log("Upload URL created: ".concat(o,".")),console.log("Uploading audio file...");let r=await l.new.put(o,t,{headers:{"Content-Type":a}});if(r.status>=400)throw Error("Audio file upload failed: ".concat(r.statusText));console.log("Audio file uploaded:",{fileName:n,contentType:a}),console.log("Publishing audio file...");let i=(await l.default.post("/test/audio/make-public",{fileName:n})).data;console.log("Audio file published: ".concat(i)),e={...e,audioUrl:i}}let n=new FormData;return n.append("content",new Blob([JSON.stringify(e)],{type:"application/json"})),(await l.default.put("/test",n,{headers:{Authorization:l.default.defaults.headers.Authorization,"Content-Type":"multipart/form-data"}})).data}async function f(){await l.default.get("/users")}async function p(e){let t={email:e.email,phoneNumber:e.phoneNumber,firstName:e.firstName,lastName:e.lastName,password:e.password,username:e.username};try{return await l.default.post("/register",t),!0}catch(e){return console.error("API request failed:",e),!1}}async function m(e){return(await l.default.get("/exam/".concat(e,"/test/writing"))).data}async function h(e,t){await l.default.post("/exam/".concat(e,"/evaluate/writing"),{point:t})}async function g(e){return(await l.default.get("/exam/".concat(e,"/result"))).data}async function w(e){return(await l.default.get("/exam/".concat(e,"/answer/writing"))).data}async function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await l.default.get("/exam/not-graded?page=".concat(e,"&size=").concat(t))).data}},8227:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(5893),o=n(648),r=n(1163),i=n(7294),u=n(7772),s=n.n(u);function l(){let[e,t]=(0,i.useState)({username:"",password:""}),[n,u]=(0,i.useState)(!1),l=(0,r.useRouter)();(0,i.useEffect)(()=>{if(n){document.getElementById("error").hidden=!0,document.getElementById("authenticated").hidden=!1;let e=new URLSearchParams(window.location.search);if(e.get("redirect")){let t=decodeURIComponent(e.get("redirect"))||"/redirect";l.push(t)}else l.push("/redirect")}},[n]);let d=e=>{let n=e.target.value;t(e=>({...e,username:n})),f()},c=e=>{let n=e.target.value;t(e=>({...e,password:n})),f()};function f(){let e=document.getElementsByTagName("button")[0];function t(t){13===t.keyCode&&(t.preventDefault(),e.click())}let n=document.getElementsByTagName("input");Array.from(n).forEach(e=>{e.addEventListener("keydown",t)})}return(0,a.jsx)("div",{className:s().all,children:(0,a.jsxs)("div",{className:s().box,children:[(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:"Please log in as administrator"})}),(0,a.jsx)("input",{className:s().input,type:"text",placeholder:"Username",onChange:e=>d(e)}),(0,a.jsx)("input",{className:s().input,type:"password",placeholder:"password",onChange:e=>c(e)}),(0,a.jsx)("p",{id:"error",hidden:!0,children:"Wrong admin's account, please try again"}),(0,a.jsx)("p",{id:"authenticated",hidden:!0,children:"Waiting for a second"}),(null==e?void 0:e.username)&&(null==e?void 0:e.password)&&(0,a.jsx)("button",{className:s().button,onClick:n=>{(0,o.YR)(e.username,e.password).then(e=>{u(e),e||(document.getElementById("error").hidden=!1)}).catch(()=>{Array.from(document.getElementsByTagName("input")).forEach(e=>{e.value=""}),document.getElementById("error").hidden=!1}),t({username:"",password:""})},children:"Log in"}),(!(null==e?void 0:e.username)||!(null==e?void 0:e.password))&&(0,a.jsx)("button",{className:s().disabledButton,children:"Log in"})]})})}},7772:function(e){e.exports={all:"styles_all__4wEox",box:"styles_box__LIxMc",input:"styles_input__dEIEU",disabledButton:"styles_disabledButton__Jo4EQ",button:"styles_button__jss6n"}}},function(e){e.O(0,[774,7,888,179],function(){return e(e.s=7267)}),_N_E=e.O()}]);